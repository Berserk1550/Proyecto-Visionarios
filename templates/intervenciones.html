<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Intervención</title>
    <link rel="stylesheet" href="../static/intervencion.css">
</head>
<body>
    <h1>Nueva Intervención para Caso #{{ caso.num_caso }}</h1>

    <form action="{{ url_for('guardar_intervencion', num_caso=caso.num_caso) }}" method="POST">
        <!-- Datos del caso (solo mostrar, no editar) -->
        <label>Número de caso:</label>
        <input type="text" name="num_caso" value="{{ caso.num_caso }}" readonly><br>

        <label>Documento estudiante:</label>
        <input type="text" name="documento" value="{{ caso.documento }}" readonly><br>

        <label>Tipo de caso:</label>
        <input type="text" value="{{ caso.caso_tipo }}" readonly><br>

        <label>Fecha apertura:</label>
        <input type="text" value="{{ caso.caso_fecha_apertura }}" readonly><br>

        <label>Docente que aperturó:</label>
        <input type="text" value="{{ caso.doc_pronal }}" readonly><br>

        <label>Descripción del caso:</label>
        <textarea readonly>{{ caso.caso_descripcion }}</textarea><br>

        <label>Estado del caso:</label>
        <input type="text" value="{{ caso.caso_estado }}" readonly><br>

        <!-- Campos de la intervención -->
        <label>Descripción intervención:</label>
        <textarea name="descripcion" required></textarea><br>

        <label>Compromiso:</label>
        <input type="text" name="compromiso"><br>

        <label>Fecha límite del compromiso:</label>
        <input type="date" name="fecha_compromiso"><br>


        <!-- Botones -->
        <button type="submit">Guardar intervención</button>
        <a href="{{ url_for('ver_caso', num_caso=caso.num_caso) }}"><button type="button">Regresar</button></a>
        <button type="reset">Limpiar</button>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash_messages">
            {% for category, message in messages %}
                <script>
                Swal.fire({
                    icon: '{{ category }}' === 'success' ? 'success' : 'error',
                    title: '{{ message }}',
                    confirmButtonText: 'Aceptar'
                });
                </script>
            {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
</body>
</html>
